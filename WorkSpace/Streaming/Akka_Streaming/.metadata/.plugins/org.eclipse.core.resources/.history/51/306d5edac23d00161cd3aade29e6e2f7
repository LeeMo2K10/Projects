package com.akka.stream;

import java.util.concurrent.CompletionStage;

import akka.actor.ActorSystem;
import akka.event.Logging;
import akka.event.LoggingAdapter;
import akka.stream.ActorMaterializer;
import akka.stream.Materializer;
import akka.stream.javadsl.Source;
import akka.stream.javadsl.Tcp;
import akka.stream.javadsl.Tcp.IncomingConnection;
import akka.stream.javadsl.Tcp.ServerBinding;

public class AcceptingConnections {

	ActorSystem system = ActorSystem.create("External");

	Materializer mat = ActorMaterializer.create(system);

	LoggingAdapter log = Logging.getLogger(system, this);

	
	public void accept(){
		
		Source<IncomingConnection, CompletionStage<ServerBinding>> connection= Tcp.get(system).bind("localhost", 8809);
		
		connection.runForeach(connection -> {
			log.info("New Connection From :" + connection.get)
		}, mat)
		
	}
	
}
