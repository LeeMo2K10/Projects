package com.akka.ScanningBus;

import java.time.Duration;

import akka.actor.ActorSystem;
import akka.actor.Props;
import akka.testkit.JavaTestKit;

public class ScanningBusTest {

	ActorSystem system = ActorSystem.create("ScanningBus");
	JavaTestKit probe1 = new JavaTestKit(system);

	public void test() {

		ScanningBusImpl scanningBus = new ScanningBusImpl();
		scanningBus.subscribe(system.actorOf(Props.create(TestActor.class)), 4);
		scanningBus.publish("xyzabc");
		scanningBus.publish("ab");
		probe1.expectMsgEquals("ab");
		scanningBus.publish("abc");
		probe1.expectMsgEquals(3, "abc");
		probe1.expectMsgEquals(Duration.ofSeconds(2), "ab");
	}

	public static void main(String[] args) {
		ScanningBusTest test = new ScanningBusTest();
		test.test();
	}
}
