package com.biz.Authenticator;

import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.Authenticator;
import java.net.HttpURLConnection;
import java.net.InetAddress;
import java.net.MalformedURLException;
import java.net.PasswordAuthentication;
import java.net.URL;
import java.util.Properties;

public class AuthenticatorTest2 {

	public static void main(String[] args) throws IOException {

		byte[] b = new byte[1];
		Properties systemSettings = System.getProperties();
		systemSettings.put("http.proxyHost", "proxy.mydomain.local");
		systemSettings.put("http.proxyPort", "80");

		Authenticator.setDefault(new Authenticator() {
			protected PasswordAuthentication getPasswordAuthentication() {
				return new PasswordAuthentication("mydomain\\username", "password".toCharArray());
			}
		});

		URL u = new URL("http://www.torrentz.com");
		HttpURLConnection con = (HttpURLConnection) u.openConnection();
		DataInputStream di = new DataInputStream(con.getInputStream());
		while (-1 != di.read(b, 0, 1)) {
			System.out.print(new String(b));
		}
	}

}
